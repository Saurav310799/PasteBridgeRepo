<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PasteBridge</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        margin: 0;
        background: #f0f2f5;
    }

    h2 {
        text-align: center;
        margin-bottom: 30px;
        font-size: 26px;
    }

    .container {
        max-width: 900px;
        margin: auto;
        display: flex;
        justify-content: center;
        gap: 30px; /* MORE SPACE between left and right columns */
    }

    .left {
        width: 55%;
        display: flex;
        flex-direction: column;
        gap: 25px; /* MORE SPACE between textarea and output */
    }

    .right {
        width: 35%;
        display: flex;
        flex-direction: column;
        gap: 25px; /* MORE SPACE between input + buttons */
    }

    textarea, input {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        border-radius: 6px;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }

    textarea {
        height: 150px;
        resize: none;
        background: white;
    }

    #output {
        width: 100%;
        height: 180px;
        padding: 12px;
        background: white;
        border-radius: 6px;
        border: 1px solid #ccc;
        white-space: pre-wrap;
        overflow-y: auto;
    }

    button {
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
        background: #007aff;
        color: white;
        font-weight: bold;
    }

    #copyBtn {
        background: #28a745;
    }

    @media (max-width: 700px) {
        .container {
            flex-direction: column;
            width: 95%;
            gap: 20px;
        }
        .left, .right {
            width: 100%;
            gap: 20px;
        }
    }
</style>
</head>

<body>

<h2>PasteBridge</h2>

<div class="container">

    <!-- LEFT SIDE -->
    <div class="left">
        <textarea id="content" placeholder="Paste text here..."></textarea>
        <div id="output"></div>
    </div>

    <!-- RIGHT SIDE -->
    <div class="right">
        <button id="saveBtn">Save</button>
        <input id="keyInput" placeholder="Enter key..." />
        <button id="loadBtn">Load</button>
        <button id="copyBtn" style="display:none;">Copy Text</button>
    </div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyBzE0ZPDrWEYb4ewS55mcOVcbkgRBybHwM",
  authDomain: "pastebridge-67b1c.firebaseapp.com",
  projectId: "pastebridge-67b1c",
  storageBucket: "pastebridge-67b1c.firebasestorage.app",
  messagingSenderId: "324145905324",
  appId: "1:324145905324:web:b5c2a036a875b3ba536909",
  measurementId: "G-66V87E464N"
};

// Init Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function randomKey() {
  return Math.random().toString(36).substring(2, 7);
}

// SAVE
document.getElementById("saveBtn").onclick = async () => {
  const content = document.getElementById("content").value.trim();
  if (!content) return alert("Nothing to save.");

  const key = randomKey();
  await db.collection("pastes").doc(key).set({
    content,
    ts: Date.now()
  });

  alert("Saved! Your key: " + key);
};

// LOAD
document.getElementById("loadBtn").onclick = async () => {
  const key = document.getElementById("keyInput").value.trim();
  if (!key) return alert("Enter a key.");

  const docSnap = await db.collection("pastes").doc(key).get();
  if (!docSnap.exists) return alert("Not found.");

  const text = docSnap.data().content;
  document.getElementById("output").innerText = text;

  document.getElementById("copyBtn").style.display = "block";
};

// COPY BTN
document.getElementById("copyBtn").onclick = async () => {
  const text = document.getElementById("output").innerText;
  if (!text) return alert("Nothing to copy.");

  try {
    await navigator.clipboard.writeText(text);
    alert("Copied!");
  } catch (err) {
    alert("Copy failed");
  }
};
</script>

</body>
</html>

